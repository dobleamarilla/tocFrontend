{"version":3,"sources":["webpack:///./src/components/Fichajes.vue","webpack:///./src/components/Fichajes.vue?7b7b","webpack:///./src/components/Fichajes.vue?e2b6"],"names":["class","style","id","tabindex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","scope","href","abrirModal","consumoPersonal","inputBusqueda","placeholder","buscar","arrayTrabajadores","trabajador","index","key","nombre","fichado","undefined","fichar","desfichar","name","setup","store","modalFichajes","show","cerrarModal","hide","a","post","busqueda","value","then","res","data","catch","err","console","log","idTrabajador","error","mensaje","dispatch","router","push","document","getElementById","keyboard","__exports__","render"],"mappings":"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","file":"js/chunk-74e7fe81.a983f48c.js","sourcesContent":["<template>\r\n    <div class='col-md-6 ms-3 mt-3'>\r\n        <div class='row ms-3'>\r\n            <div class=\"card cardWidth\">\r\n                <div class=\"card-body\" style='text-align: center;'>\r\n                    <span><i class=\"bi bi-door-open\"></i></span>\r\n                    <a href=\"#\" class=\"btn btn-primary\" @click=\"abrirModal()\">Fichar</a>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"card cardWidth\">\r\n                <div class=\"card-body\" style='text-align: center;'>\r\n                    <span><i class=\"bi bi-cup-straw\"></i></span>\r\n                    <button @click=\"consumoPersonal()\" class=\"btn btn-primary\">Consumo personal</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"modalFichajes\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">Fichar</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n                <input v-model=\"inputBusqueda\" class=\"form-control\" style=\"width: 350px; height: 50px; font-size: 20px\" type=\"text\" placeholder=\"Introduce tu nombre\">\r\n                <button type=\"button\" style=\"width: 100px\" class=\"btn btn-primary ms-2\" @click=\"buscar()\">Buscar</button>\r\n                <div class=\"row\">\r\n                    <div class=\"table\" style=\"height: 400px;\">\r\n                        <table class=\"table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope=\"col\">Nombre</th>\r\n                                    <th scope=\"col\">Fichar/Desfichar</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(trabajador, index) of arrayTrabajadores\" v-bind:key=\"index\">\r\n                                    <td>{{trabajador.nombre}}</td>\r\n                                    <td v-if=\"trabajador.fichado === false || trabajador.fichado == undefined\"><a href=\"#\" class=\"btn btn-outline-primary btn_fc\" @click=\"fichar(trabajador, index)\">FICHAR</a></td>\r\n                                    <td v-else><a href=\"#\" class=\"btn btn-outline-success btn_fc\" @click=\"desfichar(trabajador, index)\">DESFICHAR</a></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary btn-lg\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { Modal } from 'bootstrap';\r\nimport { onMounted, ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport router from '../router/index';\r\n\r\nexport default {\r\n    name: 'Dependientas',\r\n    setup() {\r\n        const store = useStore();\r\n        const nombre = 'Santy';\r\n        const id = 156;\r\n        let modalFichajes = null;\r\n        const arrayTrabajadores = ref([]);\r\n        const inputBusqueda = ref('');\r\n\r\n        function abrirModal() {\r\n            modalFichajes.show();\r\n        }\r\n\r\n        function cerrarModal() {\r\n            modalFichajes.hide();\r\n        }\r\n\r\n        function buscar() {\r\n            axios.post('trabajadores/buscar', { busqueda: inputBusqueda.value }).then((res) => {\r\n                arrayTrabajadores.value = res.data;\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function fichar(trabajador, index) {\r\n            axios.post('trabajadores/fichar', { idTrabajador: trabajador.idTrabajador }).then((res) => {\r\n                if (!res.data.error) {\r\n                    console.log('Trabajador fichado');\r\n                    arrayTrabajadores.value[index].fichado = true;\r\n                } else {\r\n                    console.log(res.data.mensaje);\r\n                    arrayTrabajadores.value[index].fichado = false;\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function desfichar(trabajador, index) {\r\n            axios.post('trabajadores/desfichar', { idTrabajador: trabajador.idTrabajador }).then((res) => {\r\n                if (!res.data.error) {\r\n                    console.log('Trabajador desfichado');\r\n                    arrayTrabajadores.value[index].fichado = false;\r\n                } else {\r\n                    console.log('Error al desfichar');\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function consumoPersonal() {\r\n            store.dispatch('setModoActual', 'CONSUMO PERSONAL');\r\n            store.dispatch('Footer/setMenuActivo', 1);\r\n            router.push('/');\r\n        }\r\n\r\n        onMounted(() => {\r\n            modalFichajes = new Modal(document.getElementById('modalFichajes'), {\r\n                keyboard: false,\r\n            });\r\n        });\r\n\r\n        return {\r\n            consumoPersonal,\r\n            fichar,\r\n            desfichar,\r\n            inputBusqueda,\r\n            arrayTrabajadores,\r\n            buscar,\r\n            cerrarModal,\r\n            abrirModal,\r\n            nombre,\r\n            id,\r\n        };\r\n    },\r\n};\r\n</script>\r\n<style scoped>\r\n    .cardWidth {\r\n       width: 10rem;\r\n       margin: 5px;\r\n    }\r\n    span i {\r\n        font-size: 5rem;\r\n    }\r\n</style>\r\n","import { render } from \"./Fichajes.vue?vue&type=template&id=2c5479fb&scoped=true\"\nimport script from \"./Fichajes.vue?vue&type=script&lang=js\"\nexport * from \"./Fichajes.vue?vue&type=script&lang=js\"\n\nimport \"./Fichajes.vue?vue&type=style&index=0&id=2c5479fb&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/eze/tocFrontend/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c5479fb\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Fichajes.vue?vue&type=style&index=0&id=2c5479fb&scoped=true&lang=css\""],"sourceRoot":""}